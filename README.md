# Readme_Adminka

Развернём локально админку на своём пк.
что нам понадобиться: `Nodejs`, `Postman`, `MongoDB`

1. Запускаем две папки в vsCode 1-domains-monitor-main. 2-domain-admin-backend-master
   не забываем закинуть в domain-admin-backend файл ENV который находится в папке `readme`
2. Запускаем `MongoDB` просто открываем не более
3. Запускаем `postman` и закидываем туда коллекцию которая также находится в папке `readme`
   в `postmane` видим коллекцию которая нам понадобиться. {

    папка `users` - регаем юзеров и логинем
    папка `tags` - создаем теги, просматриваем, получаем, переименовываем, удаляем
    папка `domain` создаём домены, получаем все домены, удаляем, НЕОБЯЗАТЕЛЬНО их создавать в постмане, данный функционал полностью работает в самой админке
   }
    
# Начнём запускать админку

1. открываем `domain-admin-backend`
2. пишем в консоли - `yarn dev`
3. открываем domains-monitor
4. пишем в консоли - `install i` , после пишем `npm run start`
5. вам предложат запустить фронт на другом порте тк бэк занял порт 3000, соглашаемся

Нас встречает окно входа, идём в `Postman` в папку `users` и заходим в файл `register`

`name` имя аккаунта

`email` почта аккаунат

`password` пароль аккаунта

`whitelist` разрешенные теги, если профиль может видеть все теги, `оставляем пустым`

`blacklist` запрещенные теги, вставляем `id тега` чтобы запретить профилю видеть теги которые хотите, может быть несколько, данный профиль не сможет видеть и редактировать домены с тегами которые выбрали

Когда всё вписали, нажимаем `Send`

Ниже в консоли мы получим данные типа `users` и инфо о нём, значит всё работает правильно

Далее идём в `login` который находится ниже
вводим данные почты и пароля и опять же нажимаем `Send`, после этого мы можем вернуться на сайт с админкой и ввести данные, так мы войдём в админку, Теперь мы можем создавать и редактировать домены. Предлагаю создать свой первый домен, тут я расскажу про некоторые нюансы.

Нажимаем `Добавить домен`

1. Вставляем в первый инпут ссылку на сайт, тут у нас есть первый нюанс
   есть ссылка  `https://www.reg.ru/web-sites` к сожалению мы не сможем просто закинуть ссылку и добавить её. Нам нужно стереть `https://www.` и после этого уже получиться добавить домен
2. далее указываем `регистратора` т.е `имя профиля` который добавил домен
3. Дату создания, по дефолту сегодняшняя дата
4. тематику, начинаем вводить, через `0.5 появятся тематики по буквам`, сделано чтобы не посылать слишком много запросов в бэк
5. Добавляем, ждём буквально пол секунды и домен добавляется
6. Можем нажать на домен в списке чтобы его отредактировать

# Теперь попробуем создать новый тэг для админки

1. заходим в `Postman` в файл `login` там мы уже залогинили наш профиль

2. в консоли ищем `access токен `

3. отсюда нам обязательно нужен `access - token` у меня это: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.             eyJzdWIiOiI2NWU4Yjc2ZjRmNjUzNzFkZTA1Nzg1NDYiLCJpYXQiOjE3MDk3NTAxMjcsImV4cCI6MTcwOTc1MTkyNywidHlwZSI6ImFjY2VzcyJ9.  jpszvSoSfBxYFJEoINO4z0wLB6N9g94rjZe3PXTd5Ts`

4. копируем его
5. далее заходим в папку `Tags` в файл `create tag`
6. нажимаем `Headers`
7. в `Value`нам нужно вставить наш токен, `ОБЯЗАТЕЛЬНО` оставляем `bearer`, далее заходим обратно в `Body`
8. в `label` пишем новый тег, мой новый тег это `Офис` после заполнения нажимаем `Send`

В консоли мы получим новый `тэг` и его `айди`

9. Заходим на сайт с админкой и пробуем создать домен с новым тэгом
10. Нажимаем `Добавить` и мы создадим новый домен с новым тэгом

По необходимости можем нажать на домен в любом удобном месте в строке домена и сможем его редактировать
Можем отредактировать что нас интересует